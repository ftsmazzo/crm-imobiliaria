---
description: Regra sobre migrations do Prisma neste projeto
globs: backend/prisma/**/*
---

# Migrations do Prisma

- **Alterações no banco:** altere o `schema.prisma` e **inclua o arquivo de migration** correspondente em `backend/prisma/migrations/<nome>/migration.sql`, para que o deploy (ex.: `prisma migrate deploy`) aplique as mudanças no banco.
- **A aplicação das migrations deve ocorrer na implantação** (pipeline/deploy), não localmente. Não execute `prisma migrate dev` nem aplique migrations manualmente no seu ambiente; o deploy é que roda `prisma migrate deploy` (ou equivalente).
- Sem o arquivo de migration no repositório, o banco em produção não recebe a coluna/tabela e o backend quebra (ex.: "column does not exist").
